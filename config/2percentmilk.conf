# ZMK配置文件：专为低功耗翻页器优化

# --------------------
# 核心电源管理配置
# --------------------
# 启用深度睡眠功能，这是省电的关键
CONFIG_ZMK_SLEEP=y
# 设置进入深度睡眠的空闲超时时间为10分钟（600000毫秒）
# 对于翻页器这种间歇使用的设备，可以设置更长的时间，例如30分钟（1800000）
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=600000
# 设置进入空闲状态的超时时间为30秒（30000毫秒）
CONFIG_ZMK_IDLE_TIMEOUT=30000

# --------------------
# 禁用非必要硬件功能
# --------------------
# 禁用RGB背光/底光，这是最大的功耗来源之一
CONFIG_ZMK_RGB_UNDERGLOW=n
CONFIG_ZMK_BACKLIGHT=n
# 禁用旋钮编码器支持，因为2%milk没有编码器
CONFIG_EC11=n
# 禁用指向设备（鼠标）功能
CONFIG_ZMK_POINTING_DEVICE=n

# --------------------
# 蓝牙性能与功耗优化
# --------------------
# 将蓝牙发射功率降至-8dBm。翻页器通常离阅读器很近，无需高发射功率
CONFIG_BT_CTLR_TX_PWR_MINUS_8=y
# 延长蓝牙连接间隔，以降低功耗。
# 延迟不敏感的应用（如翻页）可以接受更长的间隔。
# 以下设置为50ms-100ms，可以根据实际情况调整
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=40  # 40 * 1.25ms = 50ms
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=80  # 80 * 1.25ms = 100ms

# --------------------
# 固件体积优化
# --------------------
# 禁用所有与显示屏相关的功能
CONFIG_ZMK_DISPLAY=n
# 禁用复杂的组合键（Combos）功能
CONFIG_ZMK_COMBO=n
# 禁用WPM（每分钟字数）模块
CONFIG_ZMK_WPM=n
# 禁用日志功能（在发布版本中），以减小固件体积和功耗
CONFIG_ZMK_USB_LOGGING=n
CONFIG_LOG=n

# --------------------
# 基础蓝牙与USB配置
# --------------------
# 确保蓝牙功能开启
CONFIG_BT=y
CONFIG_ZMK_BLE=y
# 将设备名称设置为易于识别的名称
CONFIG_ZMK_KEYBOARD_NAME="E-Reader Remote"

CONFIG_ZMK_BEHAVIOR_CUSTOM_SRC="custom_behavior.c"
